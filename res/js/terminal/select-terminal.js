"use strict";$.terminal={schedule:{selector:{init:function(){$(".cGoTimetable").each((function(){var e=$(this),a=e.data("json-url");if(a){var r=3600*Math.floor((new Date).getTime()/1e3/3600/24)*24;$.getJSON(a+"?t="+r,(function(a){var r,t,n=$(".cDepartureArea",e);for(var i in n.find(".cLoading").remove(),a)if(a.hasOwnProperty(i)){r=a[i];var l=$('<optgroup label="">').attr({label:i});for(var o in r.child)r.child.hasOwnProperty(o)&&(t=r.child[o],l.append($("<option>",{value:JSON.stringify(t.terminals),text:o||i})));n.append(l)}$.terminal.schedule.selector.bind(e)}))}else $.terminal.schedule.selector.bind(e)}))},bind:function(e){$("select.cDepartureArea",e).on("change",(function(){var a=$(this).val();if(""!==a){var r=JSON.parse(a.replace(/'/g,'"')),t=$("select.cDepartureTerminal",e).empty();for(var n in t.append($("<option>",{value:"",text:"터미널 선택"})),r)r.hasOwnProperty(n)&&t.append($("<option>",{value:JSON.stringify(r[n].arrivals),text:n}))}})).trigger("change"),$("select.cDepartureTerminal",e).on("change",(function(){var a=$(this).val();if(""!==a){var r=JSON.parse(a.replace(/'/g,'"')),t=$("select.cArrivalArea",e).empty();for(var n in t.append($("<option>",{value:"",text:"도착지 선택"})),r)if(r.hasOwnProperty(n)){var i=r[n],l=$('<optgroup label="">').attr({label:n});for(var o in i.child)i.child.hasOwnProperty(o)&&l.append($("<option>",{value:JSON.stringify(i.child[o].terminals),text:o||n}));t.append(l)}}}));var a=$("select.cArrivalArea",e);a.on("change",(function(){var a=$(this).val();if(""!==a){var r=JSON.parse(a.replace(/'/g,'"')),t=$("select.cArrivalTerminal",e).empty();for(var n in t.append($("<option>",{value:"",text:"터미널 선택"})),r)r.hasOwnProperty(n)&&t.append($("<option>",{value:r[n].schedule,text:n}))}}));var r=$('[selected="selected"]',a);r.length>0&&(a.trigger("change"),setTimeout((function(){for(var a=r.data("terminal"),t=$("select.cArrivalTerminal",e),n=t.find("option"),i=0,l=n.length;i<l;i++){var o=$(n[i]);if(o.text()===a){t.val(o.val());break}}}))),$(".cSubmit",e).on("click",(function(){var a=$("select.cArrivalTerminal",e).val();return""===a||(document.location.href=a),!1}))}}}};
